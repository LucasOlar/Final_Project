df_ratings <- read_tsv('ratings.tsv', na = "\\N", quote = '')
df_basics <- read_tsv('basics.tsv', na = "\\N", quote = '')
library(tidyverse)
library(scales)
df_ratings <- read_tsv('ratings.tsv', na = "\\N", quote = '')
df_basics <- read_tsv('basics.tsv', na = "\\N", quote = '')
setwd("~/GitHub/Final_Project")
df_ratings <- read_tsv('ratings.tsv', na = "\\N", quote = '')
df_basics <- read_tsv('basics.tsv', na = "\\N", quote = '')
View(df_basics)
df <- full_join(df_basics, df_ratings)
View(df)
df_ratings <- read_tsv('ratings.tsv', na = "\\N", quote = '')
df_basics <- read_tsv('basics.tsv', na = "\\N", quote = '')
df_extra <- read_tsv('extra.tsv', na = "\\N", quote = '')
df <- full_join(df_basics, df_ratings, df_extra)
df <- full_join(df_basics, df_ratings)
df <- full_join(df, df_extra)
View(df_extra)
?full_join
df <- full_join(df_basics, df_ratings, by = "titleId")
df <- full_join(df, df_extra, by = "titleId")
df_ratings <- read_tsv('ratings.tsv', na = "\\N", quote = '')
df_basics <- read_tsv('basics.tsv', na = "\\N", quote = '')
df_extra <- read_tsv('extra.tsv', na = "\\N", quote = '')
df <- full_join(df_basics, df_ratings, by = "tcont")
df <- df %>% rename(titleId = tconst)
df <- right_join(df, df_extra, by = "titleId")
df <- full_join(df_basics, df_ratings, by = "tconst")
df <- df %>% rename(titleId = tconst)
df <- right_join(df, df_extra, by = "titleId")
View(df)
View(df)
View(df_extra)
df <- full_join(df_basics, df_ratings, by = "tconst")
df <- df %>%
rename(titleId = tconst) %>%
select(-c(originalTitle, endYear, numVotes))
df <- right_join(df, df_extra, by = "titleId")
df <- df %>%
select(-c(attributes, isOriginalTitle, ordering))
View(df)
df <- df %>%
select(-c(attributes, isOriginalTitle, ordering, types))
df <- full_join(df_basics, df_ratings, by = "tconst")
df <- df %>%
rename(titleId = tconst) %>%
select(-c(originalTitle, endYear, numVotes))
df <- right_join(df, df_extra, by = "titleId")
df <- df %>%
select(-c(attributes, isOriginalTitle, ordering, types))
list_languages <- unlist(strsplit(df$languages, ","))
list_languages <- list_languages[!duplicated(list_languages)]
list_languages <- append("All", list_languages)
list_languages <- unlist(strsplit(df$language, ","))
list_languages <- list_languages[!duplicated(list_languages)]
list_languages <- append("All", list_languages)
df_ratings <- read_tsv('ratings.tsv', na = "\\N", quote = '')
df_basics <- read_tsv('basics.tsv', na = "\\N", quote = '')
df_extra <- read_tsv('extra.tsv', na = "\\N", quote = '')
# Loading the required packages
library(readr)
library(jsonlite)
library(jsonlite)
library(tidyr)
library(dplyr)
library(DT)
library(knitr)
library(ggplot2)
library(ggpubr)
library(tibble)
library(styler)
library(TMDb)
library(rvest)
library(httr)
library(tidyverse)
library(scales)
df_ratings <- read_tsv('ratings.tsv', na = "\\N", quote = '')
df_basics <- read_tsv('basics.tsv', na = "\\N", quote = '')
df_extra <- read_tsv('extra.tsv', na = "\\N", quote = '')
View(df_basics)
View(df_ratings)
View(df_extra)
df <- full_join(df_basics, df_ratings, by = "tconst")
df <- df %>%
rename(titleId = tconst) %>%
select(-c(originalTitle, endYear, numVotes))
df <- right_join(df, df_extra, by = "tconst")
df <- df %>%
select(-c(ordering, types, attributes, isOriginalTitle))
df <- full_join(df_basics, df_ratings, by = "tconst")
df <- df %>%
rename(titleId = tconst) %>%
select(-c(originalTitle, endYear, numVotes))
df <- right_join(df, df_extra, by = "titleID")
df <- df %>%
select(-c(ordering, types, attributes, isOriginalTitle))
df <- full_join(df_basics, df_ratings, by = "tconst")
df <- df %>%
rename(titleId = tconst) %>%
select(-c(originalTitle, endYear, numVotes))
df <- right_join(df, df_extra, by = "titleId")
df <- df %>%
select(-c(ordering, types, attributes, isOriginalTitle))
View(df)
df_ratings <- read_tsv('ratings.tsv', na = "\\N", quote = '')
df_basics <- read_tsv('basics.tsv', na = "\\N", quote = '')
df_extra <- read_tsv('extra.tsv', na = "\\N", quote = '')
df <- full_join(df_basics, df_ratings, by = "tconst")
df <- df %>%
rename(titleId = tconst) %>%
select(-c(originalTitle, endYear, numVotes))
library(shinyWidgets)
library(shiny)
library(shinydashboard)
library(shinyjs)
library(stringr)
library(shinycssloaders)
library(shinyalert)
library(bslib)
source(file = "functions2.R", local = T)
options(spinner.color = "#0dc5c1", spinner.size = 1.4, spinner.type = 6)
df_ratings <- read_tsv('ratings.tsv', na = "\\N", quote = '')
df_basics <- read_tsv('basics.tsv', na = "\\N", quote = '')
df_extra <- read_tsv('extra.tsv', na = "\\N", quote = '')
View(df_extra)
df <- full_join(df_basics, df_ratings, by = "tconst")
df <- df %>%
rename(titleId = tconst) %>%
select(-c(originalTitle, endYear, numVotes))
df <- df_extra %>%
filter(isOriginalTitle == 1)
select(-c(ordering, types, attributes, isOriginalTitle, language))
df <- right_join(df, df_extra, by = "titleId")
df <- full_join(df_basics, df_ratings, by = "tconst")
df <- df %>%
rename(titleId = tconst) %>%
select(-c(originalTitle, endYear, numVotes))
df <- df_extra %>%
filter(isOriginalTitle == 1)
select(-c(ordering, types, attributes, isOriginalTitle, language))
df <- full_join(df, df_extra, by = "titleId")
df <- df_extra %>%
filter(isOriginalTitle == 1) %>%
select(-c(ordering, types, attributes, isOriginalTitle, language))
df <- full_join(df, df_extra, by = "titleId")
View(df)
View(df)
df <- df_extra %>%
filter(isOriginalTitle == 1) %>%
select(-c(ordering, types, attributes, isOriginalTitle, language))
df <- full_join(df, df_extra, by = "titleId")
# URL for testing outside of function
url <- "https://raw.githubusercontent.com/rengalv/Movies-Data-Analysis-Grab-a-Popcorn/master/tmdb_5000_movies.csv"
# Reading the csv file from the URL
movies <- read_csv(url, col_names = TRUE, na = "NA")
movies <- movies[!duplicated(movies$title), ]
# Takes in the dataframe and column name to be transformed
json_to_df <- function(df, column) {
column_1 <- df[apply(df[, column], 1, nchar) > 2, ] # Checks if there is an entry
list_1 <- lapply(column_1[[column]], fromJSON) # Converts the JSON to a list
values <- data.frame(unlist(lapply(list_1, function(x) paste(x$name, collapse = ",")))) # Collapsing all the values of the list as a key value pair
final_df <- cbind(column_1$id, column_1$title, values) # new data frame with the key and values a s columns
names(final_df) <- c("id", "title", column)
return(final_df)
}
genres_df <- json_to_df(movies, "genres")
keywords_df <- json_to_df(movies, "keywords")
prod_cntry_df <- json_to_df(movies, "production_countries")
prod_cmpny_df <- json_to_df(movies, "production_companies")
spoken_lang_df <- json_to_df(movies, "spoken_languages")
# Subset the movies dataframe by removing the JSON columns
movies_1 <- subset(movies, select = -c(genres, keywords, production_companies, production_countries, spoken_languages))
# Join the columns from all the generated dataframes from previous step
movies_df <- movies_1 %>%
full_join(genres_df, by = c("id", "title")) %>%
full_join(keywords_df, by = c("id", "title")) %>%
full_join(prod_cntry_df, by = c("id", "title")) %>%
full_join(spoken_lang_df, by = c("id", "title"))
View(df)
df <- full_join(df_basics, df_ratings, by = "tconst")
df <- df %>%
rename(titleId = tconst) %>%
select(-c(originalTitle, endYear, numVotes))
df <- df_extra %>%
filter(isOriginalTitle == 1) %>%
select(-c(ordering, types, attributes, isOriginalTitle, language))
df <- full_join(df, df_extra, by = "titleId")
df <- full_join(df_basics, df_ratings, by = "tconst")
df <- df %>%
rename(titleId = tconst) %>%
select(-c(originalTitle, endYear, numVotes))
df_extra <- df_extra %>%
filter(isOriginalTitle == 1) %>%
select(-c(ordering, types, attributes, isOriginalTitle, language))
df <- full_join(df, df_extra, by = "titleId")
View(df)
df_extra <- df_extra %>%
filter(isOriginalTitle == 1) %>%
select(-c(ordering, types, attributes, isOriginalTitle))
df <- full_join(df, df_extra, by = "titleId")
df_ratings <- read_tsv('ratings.tsv', na = "\\N", quote = '')
df_basics <- read_tsv('basics.tsv', na = "\\N", quote = '')
df_extra <- read_tsv('extra.tsv', na = "\\N", quote = '')
df <- full_join(df_basics, df_ratings, by = "tconst")
df <- df %>%
rename(titleId = tconst) %>%
select(-c(originalTitle, endYear, numVotes))
df_extra <- df_extra %>%
filter(isOriginalTitle == 1) %>%
select(-c(ordering, types, attributes, isOriginalTitle))
df <- full_join(df, df_extra, by = "titleId")
View(df)
df_extra <- df_extra %>%
filter(isOriginalTitle == 1) %>%
select(-c(ordering, types, attributes, isOriginalTitle, region, language))
df <- full_join(df, df_extra, by = "titleId")
View(df)
df_ratings <- read_tsv('ratings.tsv', na = "\\N", quote = '')
df_basics <- read_tsv('basics.tsv', na = "\\N", quote = '')
df_extra <- read_tsv('extra.tsv', na = "\\N", quote = '')
df <- full_join(df_basics, df_ratings, by = "tconst")
df <- df %>%
rename(titleId = tconst) %>%
select(-c(originalTitle, endYear, numVotes))
df_extra <- df_extra %>%
filter(isOriginalTitle == 1) %>%
select(-c(ordering, types, attributes, isOriginalTitle, region, language))
df <- full_join(df, df_extra, by = "titleId")
View(df)
